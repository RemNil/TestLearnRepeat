# Learning


## Why learn at all?
With increasing experience on CTAs or INDs, there may be associations between "success" metrics and certain formal characteristics of application materials. According to [BfArM](https://www.bfarm.de/EN/BfArM/_node.html) there are 3,647 applicatioin for 2014-2018,

![Please refer directly to source of origin. [BfArM 2019](https://www.bfarm.de/DE/Arzneimittel/Arzneimittelzulassung/KlinischePruefung/Genehmigungs-Verfahren/Statistik.html)](https://www.bfarm.de/SharedDocs/Bilder/Arzneimittel/klinPr/Statistik2014-2018.jpg?__blob=normal&v=3){width=450px}


![Please refer directly to source of origin. [Pei 2019](https://www.pei.de/EN/information/license-applicants/clinical-trial-authorisation/statistics/statistics-clinical-trials-node.html)](https://www.pei.de/SharedDocs/Bilder/EN/license-applicants/overview-all-requests.jpg?__blob=thumbnail&v=10){width=450px}

### Limitations
This kind of data is from [grey literature](https://en.wikipedia.org/wiki/Grey_literature). Although the data is scraped from the web, it can be seen as an "official" release by federal institutions. However, no [API](https://en.wikipedia.org/wiki/Application_programming_interface) is available and the scope and breadth of the data is very limited which severely hampers knowledge from past experience.

[NCATS](https://pubs.acs.org/doi/pdf/10.1021/acsptsci.9b00056)

## What to learn first?
“Information gain per capita of accepted research burdens” is an useful concept. 
[Intriguing](http://serayamaouche.net/code/R/Rcode.html)

## How to learn best?

```{r eval=TRUE, include=TRUE, results=FALSE, echo=FALSE, warning=FALSE, error=FALSE, message=FALSE }
# library("devtools"); devtools::install_github("ropenhealth/openfda")
library("openfda")

# https://github.com/rOpenHealth/openfda
patient_ages = fda_query("/drug/event.json") %>%
               fda_api_key("ex0HLx7faxU5MnmTGJ9GqIRiS2qf0oP6KY8KzF3F") %>%
               fda_count("patient.patientonsetage") %>%
               fda_exec()

## Fetching: https://api.fda.gov/drug/event.json?search=&count=patient.patientonsetage

# patient ages is now a data frame with "term" and "count" columns
# let's plot it with ggplot2
# library("ggplot2")
# qplot(x=term, y=count, data=patient_ages)


SAE_query = fda_query("/drug/event.json") %>%
            fda_api_key("ex0HLx7faxU5MnmTGJ9GqIRiS2qf0oP6KY8KzF3F") %>%
            fda_count("seriousnesscongenitalanomali");

quetia_SEA= SAE_query %>% fda_filter("patient.drug.openfda.generic_name", "quetiapine") %>% fda_exec()

quetia_ages = fda_query("/drug/event.json") %>%
               fda_api_key("ex0HLx7faxU5MnmTGJ9GqIRiS2qf0oP6KY8KzF3F") %>%
               fda_count("patient.patientonsetage") %>%
               fda_exec()


Numb_query = fda_query("/drug/event.json") %>%
            fda_api_key("ex0HLx7faxU5MnmTGJ9GqIRiS2qf0oP6KY8KzF3F") %>%
            fda_count("patient.drug.drugindication");


quetia_num = Numb_query %>% fda_filter("patient.drug.openfda.generic_name", "quetiapine") %>% fda_exec()

```


```{r eval=TRUE, include=TRUE, results=TRUE, echo=FALSE, warning=FALSE, error=FALSE, message=FALSE }

library(ggplotify)
library(plotly)
p1 <- fda_plot(quetia_ages)
ggplotly(p1)



str(quetia_num)
#fda_plot(quetia_num)


plot_ly(data = quetia_num, 
        x = quetia_num$term, 
        y = quetia_num$count, 
        type = "scatter", mode = "markers") %>%
  layout(title = "Scatterplot", 
         autosize = F, width = 300, height = 300)
```